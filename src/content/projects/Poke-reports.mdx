---
title: "📊 Proyecto PokeQueue - Reportes Inteligentes con Azure"
description: "Generación y gestión de reportes de Pokémon con arquitectura serverless y procesamiento en la nube usando Azure Functions, FastAPI, Blob Storage y Terraform."
imagen: "/Proyecto PokeQueue/Diagrama Arquitectura.PNG"
href: "/pokequeue"

imagenes:
  - "/assets/Proyecto PokeQueue/Diagrama Arquitectura.PNG"
  - "/assets/Proyecto PokeQueue/front.PNG"
  - "/assets/Proyecto PokeQueue/FOTO 3.PNG"
---

## Descripción General

Este proyecto es una solución continuada a un proyecto, en el cual tuve que llevar a práctica los conceptos antes visto sobre Queue Storage, Serverles para tener un proceso asincrono sobre generación de reportes enriquecidos de Pokemones y almacenarlos automaticamente en la nube en este caso en Azure.

---

## 🏗 Arquitectura Utilizada

El proyecto sigue una arquitectura distribuida basada en eventos:

1. **Frontend (Next.js):** Interfaz para seleccionar el tipo de Pokémon y disparar el proceso.
2. **API Backend (FastAPI):** Encargada de crear registros, responder peticiones y manejar estados de los reportes.
3. **Azure Queue Storage:** Cola que dispara automáticamente una Azure Function al recibir un nuevo reporte.
4. **Azure Function:** Se conecta a la PokeAPI, enriquece los datos, genera el CSV y lo almacena.
5. **Azure Blob Storage:** Guarda el reporte CSV para descarga pública.
6. **Azure SQL Database:** Guarda el estado y la metadata de los reportes.
7. **Terraform:** Gestiona y despliega toda la infraestructura sobre Azure.

## 🚀 Funcionalidades Implementadas

### ✅ Eliminación de Reportes

- Se agregó un botón de eliminar en el frontend.
- El backend valida la existencia del reporte, elimina el CSV en Blob Storage y luego el registro en SQL.
- Implementa control de errores para evitar inconsistencias.

### ✅ Enriquecimiento del Reporte

- La Azure Function ahora obtiene estadísticas completas de cada Pokémon: HP, Ataque, Defensa, Velocidad, etc provenientes de la PokeAPI.
- También extrae las habilidades para poder guardarlas en un CSV.

### ✅ Muestreo Aleatorio

- El usuario puede especificar un número máximo de registros (sample_size).
- Si se define, la Azure Function usa random.sample() para limitar el tamaño del reporte de forma aleatoria y eficiente.
- Si no se especifica entonces trae todos los registros un tipo de pokemon.

---

## 🧩 Desafíos y Soluciones

- 🧱 Lograr que todos los componentes se comuniquen correctamente: Uno de los mayores retos fue conseguir que el frontend en Next.js, la API con FastAPI, la Azure Function y la base de datos trabajaran de forma fluida. Tuve que probar múltiples flujos de datos y ajustar detalles como el envío del sample_size y la generación dinámica de los reportes.

- 🚀 Aprender e implementar recursos nuevos como Azure Queue y Functions: Era la primera vez que usaba Azure Queue Storage y Azure Functions en conjunto. Entender cómo se disparaban los procesos en segundo plano y cómo manejar errores de red o fallos silenciosos me tomó bastante prueba y error, pero al final logré automatizar todo el proceso de generación de reportes.

---

## 📁 Repositorios de Código Fuente

- 🔧 **Infraestructura Terraform**  
  [👉 GitHub](https://github.com/sosa22001/poke.terraform.git)

- 🎯 **Frontend en Next.js**  
  [👉 GitHub](https://github.com/sosa22001/poke.ui.git)

- 🧠 **Backend FastAPI**  
  [👉 GitHub](https://github.com/sosa22001/poke.queue.api.git)

- ⚙️ **Azure Function (Worker)**  
  [👉 GitHub](https://github.com/sosa22001/poke.functionApp.git)

- 🛢 **Scripts SQL**  
  [👉 GitHub](https://github.com/sosa22001/poke.queue.sql.git)

---

## 🌐 Enlaces al Sistema Desplegado

- 🖥️ **Interfaz Web (UI):**  
  [https://ui-pokequeue-dev-ijul.azurewebsites.net](https://ui-pokequeue-dev-ijul.azurewebsites.net)

- 🔌 **API FastAPI:**  
  [https://api-pokequeue-dev-ijul.azurewebsites.net](https://api-pokequeue-dev-ijul.azurewebsites.net)

---

## 📦 Tecnologías utilizadas

- ⚛️ Next.js
- 🐍 FastAPI
- ☁️ Azure Functions
- 🗃 Azure Blob Storage
- 🐘 Azure SQL Database
- 📬 Azure Queue Storage
- 🔧 Terraform
- 🐳 Docker

---
